<?php

session_start();

require_once "config.php";

if(isset($_POST["update"])){

        $em_id = $_POST["emp_id"];
        $password = $_POST["emp_pswd"];
    
        $param_password = password_hash($password, PASSWORD_DEFAULT);

        if(!empty($password)) {

        $sql = "UPDATE users, gs_employees SET users.password = '".$param_password."', users.user_type = '".$_POST["emp_role"]."', users.user_status = '".$_POST["emp_status"]."', users.country_type = '".$_POST["country_type"]."', gs_employees.emp_name = '".$_POST["full_name"]."', gs_employees.emp_desg = '".$_POST["emp_designation"]."', gs_employees.emp_mail = '".$_POST["email"]."', gs_employees.doj = '".$_POST["doj"]."', gs_employees.emp_dept = '".$_POST["department"]."', gs_employees.emp_pan = '".$_POST["pan"]."', gs_employees.emp_uan = '".$_POST["uan"]."', gs_employees.emp_esi = '".$_POST["esi"]."', gs_employees.emp_paymode = '".$_POST["payment_mode"]."', gs_employees.emp_bank = '".$_POST["bank"]."', gs_employees.emp_ifsc = '".$_POST["ifsc"]."', gs_employees.emp_acc = '".$_POST["ac_no"]."', gs_employees.emp_gsal = '".$_POST["gross"]."', gs_employees.emp_food = '".$_POST["food_allw"]."', gs_employees.emp_travel = '".$_POST["travel_allw"]."', gs_employees.emp_spl = '".$_POST["spl_allowance"]."', gs_employees.emp_meal = '".$_POST["msa"]."', gs_employees.emp_cab = '".$_POST["tsa"]."', gs_employees.emp_stinc = '".$_POST["stack"]."', gs_employees.emp_inc = '".$_POST["inc"]."', gs_employees.emp_other = '".$_POST["others"]."', gs_employees.emp_exitdate = '".$_POST["eed"]."', gs_employees.emp_desp = '".$_POST["desc"]."', gs_employees.emp_status = '".$_POST["emp_status"]."', gs_employees.country_type = '".$_POST["country_type"]."', gs_employees.nick_name = '".$_POST["nick_name"]."', gs_employees.line_manager = '".$_POST["line_manager"]."', gs_employees.joining_month = '".$_POST["joining_month"]."', gs_employees.date_of_hitting = '".$_POST["date_of_hitting"]."', gs_employees.ageing = '".$_POST["ageing"]."', gs_employees.rejoing_on = '".$_POST["rejoing_on"]."', gs_employees.date_of_confirmation = '".$_POST["date_of_confirmation"]."', gs_employees.exit_formalities = '".$_POST["exit_formalities"]."', gs_employees.fnf = '".$_POST["fnf"]."', gs_employees.reason_of_leaving = '".$_POST["reason_of_leaving"]."', gs_employees.type_of_attrition = '".$_POST["type_of_attrition"]."', gs_employees.annual_ctc_in = '".$_POST["annual_ctc_in"]."', gs_employees.annual_ctc_new = '".$_POST["annual_ctc_new"]."', gs_employees.in_hand_salary_with_stack = '".$_POST["in_hand_salary_with_stack"]."', gs_employees.final_ctc_all = '".$_POST["final_ctc_all"]."', gs_employees.transport_r_a = '".$_POST["transport_r_a"]."', gs_employees.father_name = '".$_POST["father_name"]."', gs_employees.gender = '".$_POST["gender"]."', gs_employees.dob = '".$_POST["dob"]."', gs_employees.marital_status = '".$_POST["marital_status"]."', gs_employees.present_address_h_no = '".$_POST["present_address_h_no"]."', gs_employees.lacality_building = '".$_POST["lacality_building"]."', gs_employees.area = '".$_POST["area"]."', gs_employees.district = '".$_POST["district"]."', gs_employees.state = '".$_POST["state"]."', gs_employees.post_code = '".$_POST["post_code"]."', gs_employees.permanent_address_h_no = '".$_POST["permanent_address_h_no"]."', gs_employees.per_lacality_building = '".$_POST["per_lacality_building"]."', gs_employees.per_area = '".$_POST["per_area"]."', gs_employees.per_district = '".$_POST["per_district"]."', gs_employees.per_state = '".$_POST["per_state"]."', gs_employees.per_post_code = '".$_POST["per_post_code"]."', gs_employees.phone = '".$_POST["phone"]."', gs_employees.mobile = '".$_POST["mobile"]."', gs_employees.primary_email = '".$_POST["primary_email"]."', gs_employees.aadhaar = '".$_POST["aadhaar"]."', gs_employees.nominee_details = '".$_POST["nominee_details"]."', gs_employees.relation = '".$_POST["relation"]."', gs_employees.address = '".$_POST["address"]."', gs_employees.emy_contact_no = '".$_POST["emy_contact_no"]."', gs_employees.emy_contact_relation = '".$_POST["emy_contact_relation"]."', gs_employees.emy_contact_email = '".$_POST["emy_contact_email"]."', gs_employees.no_of_bank = '".$_POST["no_of_bank"]."', gs_employees.no_of_family_member = '".$_POST["no_of_family_member"]."', gs_employees.mob_link_uan_no = '".$_POST["mob_link_uan_no"]."', gs_employees.blood_group = '".$_POST["blood_group"]."', gs_employees.performer_month = '".$_POST["performer_month"]."', gs_employees.emp_status = '".$_POST["emp_status"]."', gs_employees.verbal_warning = '".$_POST["verbal_warning"]."', gs_employees.reason_of_verbal_warning = '".$_POST["reason_of_verbal_warning"]."', gs_employees.date_of_verbal_warning = '".$_POST["date_of_verbal_warning"]."', gs_employees.no_of_warning = '".$_POST["no_of_warning"]."', gs_employees.reason_of_warning = '".$_POST["reason_of_warning"]."', gs_employees.date_of_written_warning = '".$_POST["date_of_written_warning"]."', gs_employees.pip_issue_date = '".$_POST["pip_issue_date"]."', gs_employees.appraisal_letter = '".$_POST["appraisal_letter"]."', gs_employees.appraisal_1 = '".$_POST["appraisal_1"]."',gs_employees.appraisal_2 = '".$_POST["appraisal_2"]."', gs_employees.appraisal_3 = '".$_POST["appraisal_3"]."', gs_employees.appraisal_4 = '".$_POST["appraisal_4"]."', gs_employees.ssc = '".$_POST["ssc"]."', gs_employees.hsc = '".$_POST["hsc"]."', gs_employees.graduation = '".$_POST["graduation"]."', gs_employees.experience_relieving = '".$_POST["experience_relieving"]."', gs_employees.salary_slip = '".$_POST["salary_slip"]."', gs_employees.bank_statement = '".$_POST["bank_statement"]."', gs_employees.cancel_cheque = '".$_POST["cancel_cheque"]."' WHERE users.username = '".$_POST["emp_id"]."' AND gs_employees.emp_id = '".$_POST["emp_id"]."'" ;
        
        } else {

        $sql = "UPDATE users, gs_employees SET users.user_type = '".$_POST["emp_role"]."', users.country_type = '".$_POST["emp_status"]."', users.country_type = '".$_POST["country_type"]."', gs_employees.emp_name = '".$_POST["full_name"]."', gs_employees.emp_desg = '".$_POST["emp_designation"]."', gs_employees.emp_mail = '".$_POST["email"]."', gs_employees.doj = '".$_POST["doj"]."', gs_employees.emp_dept = '".$_POST["department"]."', gs_employees.emp_pan = '".$_POST["pan"]."', gs_employees.emp_uan = '".$_POST["uan"]."', gs_employees.emp_esi = '".$_POST["esi"]."', gs_employees.emp_paymode = '".$_POST["payment_mode"]."', gs_employees.emp_bank = '".$_POST["bank"]."', gs_employees.emp_ifsc = '".$_POST["ifsc"]."', gs_employees.emp_acc = '".$_POST["ac_no"]."', gs_employees.emp_gsal = '".$_POST["gross"]."', gs_employees.emp_food = '".$_POST["food_allw"]."', gs_employees.emp_travel = '".$_POST["travel_allw"]."', gs_employees.emp_spl = '".$_POST["spl_allowance"]."', gs_employees.emp_meal = '".$_POST["msa"]."', gs_employees.emp_cab = '".$_POST["tsa"]."', gs_employees.emp_stinc = '".$_POST["stack"]."', gs_employees.emp_inc = '".$_POST["inc"]."', gs_employees.emp_other = '".$_POST["others"]."', gs_employees.emp_exitdate = '".$_POST["eed"]."', gs_employees.emp_desp = '".$_POST["desc"]."', gs_employees.emp_status = '".$_POST["emp_status"]."', gs_employees.country_type = '".$_POST["country_type"]."', gs_employees.nick_name = '".$_POST["nick_name"]."', gs_employees.line_manager = '".$_POST["line_manager"]."', gs_employees.joining_month = '".$_POST["joining_month"]."', gs_employees.date_of_hitting = '".$_POST["date_of_hitting"]."', gs_employees.ageing = '".$_POST["ageing"]."', gs_employees.rejoing_on = '".$_POST["rejoing_on"]."', gs_employees.date_of_confirmation = '".$_POST["date_of_confirmation"]."', gs_employees.exit_formalities = '".$_POST["exit_formalities"]."', gs_employees.fnf = '".$_POST["fnf"]."', gs_employees.reason_of_leaving = '".$_POST["reason_of_leaving"]."', gs_employees.type_of_attrition = '".$_POST["type_of_attrition"]."', gs_employees.annual_ctc_in = '".$_POST["annual_ctc_in"]."', gs_employees.annual_ctc_new = '".$_POST["annual_ctc_new"]."', gs_employees.in_hand_salary_with_stack = '".$_POST["in_hand_salary_with_stack"]."', gs_employees.final_ctc_all = '".$_POST["final_ctc_all"]."', gs_employees.transport_r_a = '".$_POST["transport_r_a"]."', gs_employees.father_name = '".$_POST["father_name"]."', gs_employees.gender = '".$_POST["gender"]."', gs_employees.dob = '".$_POST["dob"]."', gs_employees.marital_status = '".$_POST["marital_status"]."', gs_employees.present_address_h_no = '".$_POST["present_address_h_no"]."', gs_employees.lacality_building = '".$_POST["lacality_building"]."', gs_employees.area = '".$_POST["area"]."', gs_employees.district = '".$_POST["district"]."', gs_employees.state = '".$_POST["state"]."', gs_employees.post_code = '".$_POST["post_code"]."', gs_employees.permanent_address_h_no = '".$_POST["permanent_address_h_no"]."', gs_employees.per_lacality_building = '".$_POST["per_lacality_building"]."', gs_employees.per_area = '".$_POST["per_area"]."', gs_employees.per_district = '".$_POST["per_district"]."', gs_employees.per_state = '".$_POST["per_state"]."', gs_employees.per_post_code = '".$_POST["per_post_code"]."', gs_employees.phone = '".$_POST["phone"]."', gs_employees.mobile = '".$_POST["mobile"]."', gs_employees.primary_email = '".$_POST["primary_email"]."', gs_employees.aadhaar = '".$_POST["aadhaar"]."', gs_employees.nominee_details = '".$_POST["nominee_details"]."', gs_employees.relation = '".$_POST["relation"]."', gs_employees.address = '".$_POST["address"]."', gs_employees.emy_contact_no = '".$_POST["emy_contact_no"]."', gs_employees.emy_contact_relation = '".$_POST["emy_contact_relation"]."', gs_employees.emy_contact_email = '".$_POST["emy_contact_email"]."', gs_employees.no_of_bank = '".$_POST["no_of_bank"]."', gs_employees.no_of_family_member = '".$_POST["no_of_family_member"]."', gs_employees.mob_link_uan_no = '".$_POST["mob_link_uan_no"]."', gs_employees.blood_group = '".$_POST["blood_group"]."', gs_employees.performer_month = '".$_POST["performer_month"]."', gs_employees.emp_status = '".$_POST["emp_status"]."', gs_employees.verbal_warning = '".$_POST["verbal_warning"]."', gs_employees.reason_of_verbal_warning = '".$_POST["reason_of_verbal_warning"]."', gs_employees.date_of_verbal_warning = '".$_POST["date_of_verbal_warning"]."', gs_employees.no_of_warning = '".$_POST["no_of_warning"]."', gs_employees.reason_of_warning = '".$_POST["reason_of_warning"]."', gs_employees.date_of_written_warning = '".$_POST["date_of_written_warning"]."', gs_employees.pip_issue_date = '".$_POST["pip_issue_date"]."', gs_employees.appraisal_letter = '".$_POST["appraisal_letter"]."', gs_employees.appraisal_1 = '".$_POST["appraisal_1"]."',gs_employees.appraisal_2 = '".$_POST["appraisal_2"]."', gs_employees.appraisal_3 = '".$_POST["appraisal_3"]."', gs_employees.appraisal_4 = '".$_POST["appraisal_4"]."', gs_employees.ssc = '".$_POST["ssc"]."', gs_employees.hsc = '".$_POST["hsc"]."', gs_employees.graduation = '".$_POST["graduation"]."', gs_employees.experience_relieving = '".$_POST["experience_relieving"]."', gs_employees.salary_slip = '".$_POST["salary_slip"]."', gs_employees.bank_statement = '".$_POST["bank_statement"]."', gs_employees.cancel_cheque = '".$_POST["cancel_cheque"]."' WHERE users.username = '".$_POST["emp_id"]."' AND gs_employees.emp_id = '".$_POST["emp_id"]."'";

        }

        $link -> query($sql);

        if($link -> affected_rows > 0){
            $_SESSION["dataUpdate"] = "1";
            $_SESSION["dataIns"] = "0";
            $_SESSION["message"] = "0";
            header("Location: view_emps.php");
        } else {
            echo "Something went wrong.";
            echo $link -> error;
        }

        mysqli_close($link);
    
        
    
        }
